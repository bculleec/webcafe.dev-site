<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome! | webcafe.dev</title>
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <style>
        body {
            font-family: sans-serif;
            background: #2b2420;
            color: #e8d9c7;
            margin: 0;
            overflow: hidden;
        }

        input#q,
        input#input-username {
            background: #3a322d;
            padding: 10px;
            color: #e8d9c7;
            border: 1px solid #5a4030;
            outline: none;
            font-weight: bold;
        }

        button.join-chan,
        button.leave-chan,
        input#submit-username {
            font-family: sans-serif;
            padding: 10px;
            background: #3f2e22;
            color: #e8d9c7;
            border: 1px solid #5a4030;
            margin: 3px 0;
            cursor: pointer;
        }
        button.join-chan:hover,
        button.leave-chan:hover,
        input#submit-username:hover {
            background: #5a4030;
        }

        .panel {
            position: absolute;
            left: 0;
            top: 0;
            width: 300px;
            max-width: 300px;
            padding: 20px;
            background: #3a322db2;
            display: flex;
            flex-direction: column;
            gap: 6px;
            z-index: 20;
            overflow: hidden;
        }

        .ulist, .logs {
            background: #2b2420;
            border: 1px solid #5a4030;
            padding: 5px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.3rem;
            color: #e8d9c7;
        }

        .tutorial {
            position: absolute;
            right: 0;
            top: 0;
            padding: 20px;
            background: #3a322db2;
            color: #e8d9c7;
            margin: 10px;
            font-size: 0.9rem;
            z-index: 20;
            border: 1px solid #5a4030;
            font-weight: bold;
        }

        canvas.main-view {
            position: absolute;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10;
        }

        h3 {
            margin: 6px 0;
            font-size: 1rem;
            color: #e8d9c7;
        }

        a {
            /* text-decoration: none; */
            color: #e8d9c7;
        }

        .enter-name {
            position: absolute;
            z-index: 999;
            padding: 40px;
            font-size: 1.3rem;
            margin-left: auto;
            margin-right: auto;
            background: #3a322db2;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .zone-info {
            position: absolute;
            padding: 20px;
            font-size: 1.5rem;
            text-align: center;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 30;
            background: #3a322db2;
            color: #e8d9c7;
            font-weight: bold;
            display: none;
        }
    </style>

</head>
<body>
    
    <div style="max-width: 300px; width: 300px;background-color: #3a3a3ab2; color: white;position:absolute; z-index: 20;padding: 20px 15px;display:flex;flex-direction: column;">
    <a href="/home/">Back to Home</a>
    <h3>Users</h3>
    <div class="ulist" style="max-height: 200px;overflow-y: scroll;"></div>
    <h3>Chat</h3>
    <div class="logs" style="max-height: 200px;overflow-y: scroll;margin-bottom: 20px;word-break: break-all;"></div>
    <input type="text" id="q" style="max-width: 100%;margin: 10px 0;" placeholder="Type chat message..."><br>
    <!-- <button class="join-chan" name="chan1">chan1</button>
    <button class="join-chan" name="chan2">chan2</button>
    <button class="join-chan" name="chan3">chan3</button><br>
    <button class="leave-chan">leave chan</button> -->
    </div>

    <div class="zone-info">
        Zone
    </div>


    <canvas class="main-view" style="position: absolute;left: 0; top: 0;z-index: 10;">

    </canvas>

    <div class="tutorial">
        <p>Left-click on the ground to move.</p>
        <p>Right-Click drag to move the camera.</p>
        <p>Use scroll wheel to zoom in/out.</p> 
    </div>

    <div class="enter-name">
        <form action="/" id="username-form">
            <label for="username"><h2>What should we call you?</h2></label><br>
            <input type="text" name="username" id="input-username" required>
            <input type="submit" id="submit-username" value="Accept">
        </form>
    </div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@v0.180.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.180.0/examples/jsm/"
        }
    }
    </script>

    <script>
        const wsUrl = '<%- wsUrl %>';
        <%- include('index.js') %>

    </script>

    <script type="module">
        <%- include('3d_rendering.js') %>
    </script>
        
</body>
</html>
